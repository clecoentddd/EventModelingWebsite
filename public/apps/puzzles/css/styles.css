/* --- flow.css (Updated for Consistent Puzzle Piece Styling) --- */

:root {
  --slot-w: 260px;
  --slot-h: 260px;
}

/* Canvas positioning */
#flow-canvas {
  position: relative;
  height: 620px;
  padding: 16px;
  background: linear-gradient(180deg, #fff, #fbfbfd);
  /* FIX: Hide scrollbars while keeping scrolling functional */
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none;    /* Firefox */
}

#flow-canvas::-webkit-scrollbar {
  display: none;
}

#grid-container {
  display: grid;
  grid-auto-columns: var(--slot-w);
  grid-auto-flow: column;
  grid-template-rows: repeat(3, var(--slot-h));
  gap: 8px;
}

.grid-slot {
  position: relative;
  border: 1px dashed #eef2ff;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px;
  background: #fff;
}

.row-label {
  position: absolute;
  left: -88px;
  top: 10px;
  color: #64748b;
  font-weight: 700;
}

/* --- CORE PIECE STYLE (Used for both Grid and Tray) --- */
.flow-piece {
  /* Dimensions derived from your latest CSS */
  width: 140px; /* Adjusted from 88% to a fixed size for the tray */
  height: 120px; /* Reduced slightly from 160px to fit well in the tray area */
  border-radius: 12px;
  
  /* Flex settings for vertical stack */
  display: flex;
  flex-direction: column; 
  align-items: center; 
  justify-content: flex-start;
  
  padding: 8px; /* Reduced padding for smaller size */
  font-weight: 700;
  box-shadow: 0 4px 10px rgba(15, 23, 42, 0.1);
  color: #1e293b;
  /* Grid pieces use 'cursor: pointer' but tray pieces use 'cursor: grab' */
  cursor: grab; 
}

/* --- PIECE TRAY STYLING --- */
#piece-tray {
  margin-top: 20px;
  padding: 10px 16px;
  border-top: 2px solid #eef2ff;
}

#piece-tray h2 {
    width: 100%;
    margin-bottom: 10px;
    color: #475569;
}

/* Container for the pieces in the tray, enabling horizontal flow */
#tray-pieces-container { 
    display: flex;
    flex-wrap: wrap; 
    gap: 10px;
    align-items: flex-start; /* Align to the top of the container */
}

/* Styles specific to pieces in the tray (overrides cursor for drag) */
.draggable-piece {
    opacity: 0.95;
    cursor: grab; 
}

/* --- Grid Piece Specific Styling (Larger size) --- */
/* Pieces placed on the grid slots use this styling */
.grid-slot > .flow-piece {
  width: 88%;
  height: 160px;
  /* Use pointer cursor when placed, in case the user can still interact */
  cursor: pointer; 
}


/* --- Black Border ONLY for the 'UI' Element --- */
.flow-piece.piece-UI {
  border: 1px solid black; 
}
/* --------------------------------------------- */

.piece-name-editable {
  outline: none;
  flex-shrink: 0; 
  text-align: center;
}

/* --- Styles for the Wheel Icon --- */
.flow-piece.piece-Wheel {
  justify-content: space-between; 
}

/* Tray icon size */
.flow-piece.draggable-piece.piece-Wheel .wheel-icon {
  width: 50px; /* Smaller icon for the smaller tray piece */
  height: 50px;   
  object-fit: contain; 
}

/* Grid icon size */
.grid-slot > .flow-piece.piece-Wheel .wheel-icon {
  width: 70px; 
  height: 70px;   
  object-fit: contain; 
}
/* ------------------------------------ */

@media (max-width: 900px) {
  aside {
    display: none;
  }
}