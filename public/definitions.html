<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Glossaire - Event Modeling</title>
  <link rel="stylesheet" href="global.css">
  <link rel="stylesheet" href="definitions.css">
   <link rel="icon" type="image/png" href="favicon.png">
</head>
<body>

  <div id="header"></div>

  <main>
    <div class="main-with-sidebar">
      <div class="main-content">
        <section id="glossaire">
          <h2>Glossaire</h2>
          <input type="text" id="searchBox" placeholder="Rechercher une définition...">
          <ul id="definitionsList"></ul>
        </section>
      </div>
    </div>
  </main>

  <div id="footer"></div>

<script>
  // Charger et parser definitions.md
  async function loadDefinitions() {
    const res = await fetch("definitions.md");
    const text = await res.text();

    let defs = [];
    let currentTerm = null;
    let currentDef = [];

    text.split("\n").forEach(line => {
      line = line.trim();

      if (line.startsWith("**") && line.endsWith("**")) {
        // Sauvegarde l'entrée précédente
        if (currentTerm) {
          defs.push({ term: currentTerm, definition: currentDef.join("\n") });
        }
        currentTerm = line.replace(/\*\*/g, "").trim();
        currentDef = [];
      } else if (line.length > 0) {
        currentDef.push(line);
      }
    });

    // Sauvegarde la dernière entrée
    if (currentTerm) {
      defs.push({ term: currentTerm, definition: currentDef.join("\n") });
    }

    // Tri alphabétique
    defs.sort((a, b) => a.term.localeCompare(b.term, "fr"));

    // Affichage
    const list = document.getElementById("definitionsList");
    list.innerHTML = "";
    defs.forEach(d => {
      const card = document.createElement("div");
      card.className = "definition-card";

      // Convertit en HTML : paragraphes + puces
      let html = "";
      let lines = d.definition.split("\n");
      let ulOpen = false;

      lines.forEach(l => {
        if (l.startsWith("- ")) {
          if (!ulOpen) {
            html += "<ul>";
            ulOpen = true;
          }
          html += `<li>${l.substring(2).trim()}</li>`;
        } else {
          if (ulOpen) {
            html += "</ul>";
            ulOpen = false;
          }
          html += `<p>${l}</p>`;
        }
      });
      if (ulOpen) html += "</ul>";

      card.innerHTML = `<h3>${d.term}</h3>${html}`;
      list.appendChild(card);
    });

    // Barre de recherche
    document.getElementById("searchBox").addEventListener("input", (e) => {
      const q = e.target.value.toLowerCase();
      list.querySelectorAll(".definition-card").forEach(card => {
        card.style.display = card.textContent.toLowerCase().includes(q) ? "" : "none";
      });
    });
  }

  loadDefinitions();
</script>
 <script src="/js/script.js"></script>




</body>
</html>
